Target package: pip3 nvidia-ml-py 11.460.79
https://github.com/ganglia/gmond_python_modules/tree/master/gpu/nvidia
docs:
https://developer.download.nvidia.com/compute/DCGM/docs/nvidia-smi-367.38.pdf

shell prompt:

$ nvidia-smi -f OUTPUT-FILENAME -l INT-NUM-SECONDS-LOOP-QUERY-STATS
$ nvidia-smi -f nvida-logs -l 5 nvlink

# Set nvidia monitoring daemon with flags
    # select metric to monitor -s 
    # for monitoring PCIe Rx and Tx Throughput in MB/s (t)
    # for monitoring utilization (u)
    # at seconds-interval (-d INT)
    # to log directory (-p PATH)
    # with a filename (-j FILENAME)
$ nvidia-smi dmon -s t u -d 5 -p ./ -j nvidia-pci

$ nvidia-smi -d "5"

# Terminate the daemon:
nvidia-smi daemon -t


$ nvidia-smi dmon -s tu
$ nvidia-smi dmon -s tu -o DT
$ nvidia-smi dmon -s tu -o DT -d 5



##### FINAL TESTED LINE ####### 
$ cd output
$ sudo chmod 777 ./
$ sudo nvidia-smi dmon -s tu -o DT -d 1 -f "nvidi-logs"
##### FINAL TEST LINE #########
$ cd output
$ vmstat 1 -t > systemlogs.txt
####### FINAL TESTED LINE ########
wget https://frenchfries.net/paul/tcpstat/tcpstat-1.5.tar.gz
cd tcpstat-1.5.tar.gz
sudo yum install gcc
sudo yum install libpcap*
./configure
make
sudo make install
sudo chmod u+s /usr/local/bin/tcpstat
tcpstat -i eth0 -f 'tcp port 8888' -e -o "Time:%S\tTCPpackets=%T\tbytes=%N\tavgpacketsize=%a\tBps=%B\tnetworkload=%l\n" -F 1 > networklogs.txt







$ cd output
$ sudo yum install iptraf
$ sudo iptraf-ng -i eth0 -B -L ./IPtraffic    ## Monitors all IP Traffic

sudo pkill iptraf-ng

https://www.systutorials.com/docs/linux/man/8-iptraf-ng/


##### TESTING FILEPATHS ####### 
$ cd output
$ sudo chmod 777 ./
$ sudo nvidia-smi dmon -s tu -o DT -d 1 -f output/nvidia-logs-rank-n
##### TESTING FILEPATHS #########
$ cd output
$ vmstat 1 -t > output/node-logs-rank-n.txt
####### TESTING FILEPATHS #######
$ sudo yum install iptraf
$ sudo iptraf-ng -i eth0 -B -L ./netlogs     ## Monitors all IP Traffic
$ sudo iptraf-ng -z eth0 -B -L /output/netlogs2    ## Monitors packet sizes
$ sudo iptraf-ng -d eth0 -B -L /output/netlogs3    ## Unsure, Monitors detailed, ??? 


wget https://frenchfries.net/paul/tcpstat/tcpstat-1.5.tar.gz
cd tcpstat-1.5.tar.gz
sudo yum install gcc
sudo yum install libpcap*
./configure
make
sudo make install
sudo chmod u+s /usr/local/bin/tcpstat
tcpstat -i eth0 -f 'tcp port 8888' -e -o "Time:%S\tTCPpackets=%T\tbytes=%N\tavgpacketsize=%a\tBps=%B\tnetworkload=%l\n" -F 1 > test.txt



tcpstat -i eth0 -e -o "Time:%S\tTCPpackets=%T\tbytes=%N\tavgpacketsize=%a\tBps=%B\tnetworkload=%l\n" -F 1 > test.txt


tcpstat -i eth0 -f 'tcp port 8888' -e -o "Time:%S\tTCPpackets=%T\tbytes=%N\tavgpacketsize=%a\tBps=%B\tnetworkload=%l\n" -F 1 > test.txt



####NOTE: Look into TCPstat as an alternative  #https://linux.die.net/man/1/tcpstat


######### Monitoring TCP traffic on port 8888
https://manpages.debian.org/unstable/iptables/iptables.8.en.html
### Try 

$ sudo tcpdump -i any port 8888 -w 'TCP-logs-noderank-0' -s 96


$ sudo top -d 5 -b top-output.txt
## System Utiliz

# -I flag, insert chain RULENUMBER. Can monitor INPUT, OUTPUT, FORWARD, REROUTING


$ sudo iptables -I INPUT -p tcp --dport 8888 --syn -j LOG --log-prefix "DDP-UDP-logs-Rank-0: "
$ sudo iptables -I OUTPUT -p tcp --dport 8888 --syn -j LOG --log-prefix "DDP-UDP-logs-Rank-0: "
$ sudo iptables -I FORWARD -p tcp --dport 8888 --syn -j LOG --log-prefix "DDP-UDP-logs-Rank-0: "
https://superuser.com/questions/604998/monitor-tcp-traffic-on-specific-port
